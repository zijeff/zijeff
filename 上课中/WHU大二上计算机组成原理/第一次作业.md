### 第一章课后作业

---

<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

**6.**  解：

   1.  
      对于$P_1$而言，$M_2$速度快，$M_2$比$M_1$的速度要快一倍；对于$P_2$而言，$M_1$速度快，$M_1$比$M_2$的速度要快一倍。
   2.  
      对$M_1$机器分析，执行$P_1$的速度为：$\frac{200M}{10s} = 20 MIPS$，执行$P_2$的速度为：$\frac{0.3M}{3 \times 10^{-3}s} = 100MIPS$。

        对$M_2$机器分析，执行$P_1$的速度为：$\frac{150M}{5s} = 30 MIPS$，执行$P_2$的速度为：$\frac{0.42M}{6 \times 10^{-3}s} = 70MIPS$。

        从执行速度上来看，对于$P_2$而言，$M_1$机器更快，快了$\frac{100}{70} - 1 \approx 0.43$倍。
   3.   
      设在$M_1$和$M_2$运行程序$P_1$的平均时钟周期数$CPI$分别为：$CPI_{11}$和$CPI_{21}$。
      根据计算公式，则有：
      
      $CPI_{11} = \frac{10s \times 800M}{200 \times 10^6} = 40$，$CPI_{21} = \frac{5s \times 1.2G}{150 \times 10^6} = 40$。
   4.  
      由第2问可知，$M_1$执行$P_1$的速度为：$20 MIPS$，$M_2$执行$P_1$的速度为：$30 MIPS$。又因为$M_1$和$M_2$的价格分别为$5000$元和$8000$元，所以我们可以计算这样的一个指标：$\frac{20}{5000} > \frac{30}{8000}$。
      
      综上所述，用户应当购进$M_1$机器。

   5.  
      与上问类似我们也可以计算类似的指标：$\frac{20}{5000} \times 0.5 + \frac{100}{5000} \times 0.5 > \frac{30}{8000} \times 0.5 + \frac{70}{8000} \times 0.5$。

      综上所述，用户应当购进$M_1$机器。

**7.**  解：

   1.   
      $M_1$上可以选取一段都是$A$类指令组成的程序，其峰值$MIPS$为$1000MIPS$；$M_2$上可以选取一段都是$A$和$B$类指令组成的程序，其峰值$MIPS$为$\frac{1500}{2} = 750MIPS$
   2.   
      我们不妨设在程序$P$中每类指令的数量为$n$条，总指令数为$5n$条。

      程序$P$在$M_1$上运行所花费时间为$\frac{(1+2+2+3+4)n}{1 \times 10^9} = 12n \times 10^{-9}s$；程序$P$在$M_2$上运行所花费时间为$\frac{(2+2+4+5+6)n}{1.5 \times 10^9} = \approx 12.67n \times 10^{-9}s$。所以$M_1$更快，快$\frac{12.67-12}{12.67} \approx 5.29\%$

      $M_1$上的平均时钟周期数$CPI = \frac{1+2+2+3+4}{5} = 2.4$，$M_2$上的平均时钟周期数$CPI = \frac{2+2+4+5+6}{5} = 3.8$。

**10.** 解： 

$S_1$有$10$条指令，$CPI$为$1.9$，所含时钟周期数为$1.9\times10=19$，执行时间为$\frac{19}{500\times10^6}=3.8\times10^{-8}s$。

$S_2$有$8$条指令，$CPI$为$3.25$，所含时钟周期数为$3.25\times8=26$，执行时间为$\frac{26}{500\times10^6}=5.2\times10^{-8}s$。

**12.** 解：

由题意知，当前程序执行时间为$\frac{(1000+4000+12000+1000)\times10^6}{2.5\times10^9}=7.2s$。题目要求运行时间缩短一半，我们设改进后浮点数指令的$CPI$为$x$，访存指令的$CPI$为$y$。

易得如下方程：
 
$\frac{(500x+4000+12000+1000)\times10^6}{2.5\times10^9} = 3.6s$，$\frac{(1000+4000+3000y+1000)\times10^6}{2.5\times10^9}=3.6s$

解得：$x = -16(舍去),y = 1$，我们无法通过只改动浮点数的$CPI$来使运行时间缩短一半，将存取指令的$CPI$改进为$1$即可将运行时间缩短为一半。

改进所有指令的$CPI$后运行时间变为：$\frac{(800+3200+7200+600)\times10^6}{2.5\times10^9}=4.72s$，缩短了$\frac{7.2-4.72}{7.2} \approx 34.44\%$。

---
